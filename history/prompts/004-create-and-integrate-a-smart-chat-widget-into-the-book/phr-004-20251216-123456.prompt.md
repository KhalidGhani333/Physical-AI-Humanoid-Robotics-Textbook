---
id: phr-004-20251216-123456
title: Create Smart Chat Widget Specification
stage: spec
date: 2025-12-16
surface: /sp.specify Context: The Backend API is running at http://localhost:8000/chat. The Docusaurus Book is ready at Textbook-Physical-AI-Humanoid-Robotics/website. Goal: Create and integrate a "Smart Chat Widget" into the book.
model: claude-sonnet-4-5-20250929
feature: chat-widget
branch: 004-create-and-integrate-a-smart-chat-widget-into-the-book
user: Khalid
command: /sp.specify
labels: [specification, chat-widget, docusaurus, frontend]
links:
  spec: D:\Textbook-Physical-AI-Humanoid-Robotics\specs\004-create-and-integrate-a-smart-chat-widget-into-the-book\spec.md
  ticket:
  adr:
  pr:
files:
  - path: D:\Textbook-Physical-AI-Humanoid-Robotics\specs\004-create-and-integrate-a-smart-chat-widget-into-the-book\spec.md
    action: created
    size: 3KB
    changes: Complete feature specification for smart chat widget
  - path: D:\Textbook-Physical-AI-Humanoid-Robotics\specs\004-create-and-integrate-a-smart-chat-widget-into-the-book\checklists\requirements.md
    action: created
    size: 1KB
    changes: Quality checklist for specification validation
tests:

---
## Prompt

Context:

The Backend API is running at http://localhost:8000/chat.
The Docusaurus Book is ready at Textbook-Physical-AI-Humanoid-Robotics/website.
Goal: Create and integrate a "Smart Chat Widget" into the book.
Requirements:

Component Creation: Create website/src/component/chatUI/ChatWidget.tsx.
UI Design:
A floating action button (üí¨) at the bottom-right.
A chat window that pops up on click.
Message history (User vs Bot bubbles).
Selected Text Logic (CRITICAL):
Use window.getSelection() to detect if the user has highlighted any text on the page.
If text is selected, display a "Context found" badge in the chat window.
Send this selected text to the backend as selected_context.
API Integration:
Function that POSTs to http://localhost:8000/chat.
Handle loading states ("Thinking...").
Global Integration: Ensure this widget appears on every page of the book (likely by importing it in Layout or Root).
Constraint:

Use React functional components and hooks (useState, useEffect).
Ensure CSS does not break the Docusaurus theme.

## Response snapshot

Created comprehensive feature specification for the Smart Chat Widget including:
- User scenarios with priorities (P1, P2)
- Functional requirements (FR-001 to FR-011)
- Key entities definition
- Success criteria with measurable outcomes
- Edge cases consideration
- Quality validation checklist

The specification covers the core functionality:
- Floating chat button at bottom-right
- Chat window with message history
- Selected text detection and context badge
- API integration for chat communication
- Site-wide availability on all pages

## Outcome

- ‚úÖ Impact: Created complete feature specification ready for planning phase
- üß™ Tests:
- üìÅ Files: 2 files created (spec.md and requirements checklist)
- üîÅ Next prompts: /sp.plan to create implementation plan
- üß† Reflection: Specification successfully abstracted implementation details while preserving essential requirements

## Evaluation notes (flywheel)

- Failure modes observed: None
- Graders run and results (PASS/FAIL):
- Prompt variant (if applicable):
- Next experiment (smallest change to try):